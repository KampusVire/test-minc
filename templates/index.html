<!DOCTYPE html>
<html>

<head>
    <title>Test Environment</title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-9ndCyUaIbzAi2FUVXJi0CjmCapSmO7SnpJef0486qhLnuZ2cdeRhO02iuK6FUUVM" crossorigin="anonymous">
<style>
    table{
        table-layout: fixed;
    }

    table tbody tr td:nth-child(1), table thead th:nth-child(1){
        width: 30%!important;
    }

    table tbody tr td:nth-child(2), table thead th:nth-child(2){
        width: 70%!important;
    }

    table tbody tr td, table thead th{
        word-wrap: break-word;
    }
    

</style>
</head>

<body>
    <div class="p-4">
        <div class="row align-items-start">
            <div class="col-5">
                <h1>Test Environment</h1>
            </div>
            <div class="col-7 h-100 overflow-y-auto">
                <h3 class="mb-3">Check Detailed Information</h3>
                <div class="accordion" id="accordionDetails">
                    <div class="accordion-item">
                        <h2 class="accordion-header">
                            <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse"
                                data-bs-target="#collapseRequestInfo" aria-expanded="false"
                                aria-controls="collapseRequestInfo">
                                Request Information
                            </button>
                        </h2>
                        <div id="collapseRequestInfo" class="accordion-collapse collapse"
                            data-bs-parent="#accordionDetails">
                            <div class="accordion-body">
                                <table class="table table-bordered border-primary">
                                    <thead>
                                        <tr>
                                            <th scope="col">LABEL</th>
                                            <th scope="col">VALUE</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr>
                                            <td>Request Method</td>
                                            <td>{{request_info.type}}</td>
                                        </tr>
                                        <tr>
                                            <td>Request Path</td>
                                            <td>{{request_info.path}}</td>
                                        </tr>
                                        <tr>
                                            <td>Request Full Path</td>
                                            <td>{{request_info.full_url}}</td>
                                        </tr>
                                        <tr>
                                            <td>Request Query Parameters</td>
                                            <td>
                                                <table class="table table-bordered border-primary">
                                                    <thead>
                                                        <tr>
                                                            <th scope="col">KEY</th>
                                                            <th scope="col">VALUE</th>
                                                        </tr>
                                                    </thead>
                                                    <tbody>
                                                        {% for query_param in request_info.query_parameters %}
                                                        <tr>
                                                            <td scope="row">{{query_param }}</td>
                                                            <td> {{ request_info.query_parameters[query_param] }}</td>
                                                        </tr>
                                                        {% endfor %}
                                                    </tbody>
                                                </table>
                                            </td>
                                        </tr>

                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                    <div class="accordion-item">
                        <h2 class="accordion-header">
                            <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse"
                                data-bs-target="#collapseRequestHeaderInfo" aria-expanded="false"
                                aria-controls="collapseRequestHeaderInfo">
                                Request Header Information
                            </button>
                        </h2>
                        <div id="collapseRequestHeaderInfo" class="accordion-collapse collapse"
                            data-bs-parent="#accordionDetails">
                            <div class="accordion-body">
                                <table class="table table-bordered border-primary">
                                    <thead>
                                        <tr>
                                            <th scope="col">HEADER NAME</th>
                                            <th scope="col">VALUE</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        {% for req_header in req_headers %}
                                        <tr>
                                            <td scope="row">{{ req_header }}</td>
                                            <td>{{ req_headers[req_header] }}</td>
                                        </tr>
                                        {% endfor %}
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                    <div class="accordion-item">
                        <h2 class="accordion-header">
                            <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse"
                                data-bs-target="#collapseOSInfo" aria-expanded="false" aria-controls="collapseOSInfo">
                                OS Info
                            </button>
                        </h2>
                        <div id="collapseOSInfo" class="accordion-collapse collapse" data-bs-parent="#accordionDetails">
                            <div class="accordion-body">
                                <table class="table table-bordered border-primary">
                                    <thead>
                                        <tr>
                                            <th scope="col">LABEL</th>
                                            <th scope="col">VALUE</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr>
                                            <td>sysname</td>
                                            <td>{{os_info.sysname}}</td>
                                        </tr>
                                        <tr>
                                            <td>nodename</td>
                                            <td>{{os_info.nodename}}</td>
                                        </tr>
                                        <tr>
                                            <td>version</td>
                                            <td>{{os_info.version}}</td>
                                        </tr>
                                        <tr>
                                            <td>machine</td>
                                            <td>{{os_info.machine}}</td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                    <div class="accordion-item">
                        <h2 class="accordion-header">
                            <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse"
                                data-bs-target="#collapseResourceStatsInfo" aria-expanded="false" aria-controls="collapseResourceStatsInfo">
                                Resource Usage
                            </button>
                        </h2>
                        <div id="collapseResourceStatsInfo" class="accordion-collapse collapse" data-bs-parent="#accordionDetails">
                            <div class="accordion-body">
                                <table class="table table-bordered border-primary">
                                    <thead>
                                        <tr>
                                            <th scope="col">LABEL</th>
                                            <th scope="col">VALUE</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr>
                                            <td>RAM Usage</td>
                                            <td>{{resource_info.used_ram}} / {{resource_info.total_ram}}</td>
                                        </tr>
                                        <tr>
                                            <td>CPU Usage</td>
                                            <td>{{resource_info.current_cpu_freq}} / [{{resource_info.min_cpu_freq}} ~ {{resource_info.max_cpu_freq}}]</td>
                                        </tr>
                                        <tr>
                                            <td>Disk Usage</td>
                                            <td>
                                                {% for disk in resource_info.disk_usage %}
                                                    {% autoescape off %}
                                                        {{disk}}<br>
                                                    {% endautoescape%}
                                                {% endfor %}
                                            </td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                    <div class="accordion-item">
                        <h2 class="accordion-header">
                            <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse"
                                data-bs-target="#collapseEnvVariableInfo" aria-expanded="false"
                                aria-controls="collapseEnvVariableInfo">
                                Environment Variables
                            </button>
                        </h2>
                        <div id="collapseEnvVariableInfo" class="accordion-collapse collapse"
                            data-bs-parent="#accordionDetails">
                            <div class="accordion-body">
                                <table class="table table-bordered border-primary">
                                    <thead>
                                        <tr>
                                            <th scope="col">ENV NAME</th>
                                            <th scope="col">VALUE</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        {% for env_var in env_vars %}
                                        <tr>
                                            <td scope="row">{{ env_var }}</td>
                                            <td>{{
                                                env_vars[env_var] }}</td>
                                        </tr>
                                        {% endfor %}
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

    </div>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-geWF76RCwLtnZ8qwWowPQNguL3RmwHVBC9FhGdlKrxdiJJigb/j/68SIy3Te4Bkz"
        crossorigin="anonymous"></script>
</body>

</html>